(()=>{"use strict";var e={display:document.getElementById("currentValue"),smallDisplay:document.getElementById("lastOperation"),themeImage:document.getElementById("themeImage"),currentValue:"0",firstValue:null,secondValue:null,operator:null,lastOperation:null};function r(){var r=document.documentElement.getAttribute("data-theme"),t="light"===r?"dark":"light";document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t),e.themeImage.src="light"===r?"https://i.imgur.com/snp1idS.png":"https://i.imgur.com/JZfjpM8.png"}var t=localStorage.getItem("theme")||"light";function u(){e.display.value=e.currentValue,e.smallDisplay.value=e.lastOperation,e.display.scrollLeft=e.display.scrollWidth}function l(){var r,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=e.secondValue||0;"-"==e.currentValue.toString()[0]&&"-"==e.operator?e.firstValue="-"+e.currentValue.toString().split(e.operator)[1]:e.firstValue=e.currentValue.toString().split(e.operator)[0];var a=e.firstValue;if(null!==(r=l)&&void 0!==r&&null!==(r=r.toString())&&void 0!==r&&r.includes("%")){for(;l.toString().includes("%");)e.secondValue=parseFloat(e.secondValue)/100,l=l.toString().slice(0,-1);a.toString().includes("%")||(e.secondValue=e.secondValue*e.firstValue)}for(;a.toString().includes("%");)e.firstValue=parseFloat(e.firstValue)/100,a=a.toString().slice(0,-1);e.firstValue=parseFloat(e.firstValue),e.secondValue=parseFloat(e.secondValue),e.lastOperation=e.currentValue,t&&(e.lastOperation="-("+e.currentValue+")"),"+"===e.operator?e.currentValue=e.firstValue+e.secondValue:"-"===e.operator?e.currentValue=e.firstValue-e.secondValue:"*"===e.operator?e.currentValue=e.firstValue*e.secondValue:"/"===e.operator?(e.currentValue=e.firstValue/e.secondValue,0==e.secondValue&&(e.currentValue="Divide by zero")):"%"===e.operator&&(e.currentValue=e.currentValue.toString().split("%"),e.currentValue[1]?(e.currentValue=e.currentValue[0]%e.currentValue[1],isNaN(e.currentValue)&&(e.currentValue="Not a Number")):e.currentValue=e.currentValue[0]/100),e.currentValue.toString().includes(".")&&e.currentValue.toString().split(".")[1].length>9&&(e.currentValue=parseFloat(Number(e.currentValue).toFixed(9))),e.firstValue=e.currentValue,e.secondValue=null,e.operator=null,u()}document.documentElement.setAttribute("data-theme",t),r(),document.querySelectorAll(".btn").forEach((function(t){t.addEventListener("click",(function(t){var a,n=t.currentTarget.value;if(isNaN(n)&&"."!==n&&"%"!==n)if("clear"===n)e.currentValue="0",e.firstValue=null,e.secondValue=null,e.operator=null,e.lastOperation=null,u();else if("negate"===n&&"0"!==e.currentValue&&"Divide by zero"!==e.currentValue&&"Not a Number"!==e.currentValue)if(e.operator||e.secondValue)e.operator&&e.secondValue&&(l(!0),e.currentValue=-1*e.currentValue,u());else{var o=e.currentValue;for(e.lastOperation=e.currentValue;o.toString().includes("%");)e.currentValue=parseFloat(e.currentValue)/100,o=o.toString().slice(0,-1);e.currentValue=-e.currentValue,u()}else["/","*","-","+"].includes(n)&&"Divide by zero"!==e.currentValue&&"Not a Number"!==e.currentValue?(a=n,e.operator&&e.secondValue?l():e.operator&&!e.secondValue&&(e.operator=a,e.currentValue=e.currentValue.toString().slice(0,-1)),e.operator=a,e.firstValue=e.currentValue,"Divide by zero"!==e.currentValue&&"Not a Number"!==e.currentValue&&(e.currentValue+=e.operator),u()):"equal"===n&&e.currentValue&&e.operator&&e.secondValue?l():"equal"!==n||e.operator||e.secondValue||!e.currentValue.toString().includes("%")?"theme"===n&&r():(e.operator="%",l());else!function(r){if("."===r)"Divide by zero"==e.currentValue||"Not a Number"==e.currentValue?e.currentValue="0.":e.operator||e.currentValue.toString().includes(".")?e.operator&&e.secondValue&&!e.secondValue.toString().includes(".")&&(e.currentValue+="."):e.currentValue+=".";else if("%"===r){var t;(!e.operator||(null===(t=e.secondValue)||void 0===t?void 0:t.toString().length)>0)&&"Divide by zero"!==e.currentValue&&"!Not a Number"==e.currentValue&&(e.currentValue+="%")}else"0"===e.secondValue?(e.currentValue=e.currentValue.toString().slice(0,-1),e.currentValue+=r):"0"===e.currentValue.toString()||"Divide by zero"==e.currentValue||"Not a Number"==e.currentValue?e.currentValue=r:e.currentValue+=r;e.operator&&(e.secondValue=e.currentValue.toString().split(e.firstValue+e.operator).join("")),(e.operator&&e.secondValue>94906264||!e.operator&&e.currentValue>94906264)&&(e.currentValue=e.currentValue.toString().slice(0,-1),e.secondValue&&(e.secondValue=e.secondValue.toString().slice(0,-1))),u()}(n)}))}))})();